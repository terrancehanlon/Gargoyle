<h1> PLAY BACK </h1>

<h1>Current song: <%= JSON.stringify(playBackInfo['currentSongInfo']['name']) %></h1>

<!--Script link -->
<script src="https://sdk.scdn.co/spotify-player.js"></script>
<button onclick="log()">Cli</button>
<script>

  function log()
  {
    console.log("<%= access_token %>");
  
  }

    var token;
    var player;
    window.onSpotifyWebPlaybackSDKReady = () => {
      token = '<%= access_token %>';
      player = new Spotify.Player({
  name: 'Web Playback SDK Quick Start Player',
  getOAuthToken: cb => { cb(token); }
});

// Error handling
player.addListener('initialization_error', ({ message }) => { console.error(message); });
player.addListener('authentication_error', ({ message }) => { console.error(message); });
player.addListener('account_error', ({ message }) => { console.error(message); });
player.addListener('playback_error', ({ message }) => { console.error(message); });

// Playback status updates
player.addListener('player_state_changed', state => { console.log(state); });

// Ready
player.addListener('ready', ({ device_id }) => {
  console.log('Ready with Device ID', device_id);
});

// Not Ready
player.addListener('not_ready', ({ device_id }) => {
  console.log('Device ID has gone offline', device_id);
});

// Connect to the player!
player.connect();
};

function pause()
{
  player.togglePlay().then(() => {
console.log('Toggled playback!');
});
}

function next()
{
  player.nextTrack().then(() => {
console.log('Skipped to next track!');
});
}
</script>
